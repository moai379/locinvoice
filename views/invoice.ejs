<%- include('layout') %>

<div class="invoice-header">
  <div class="company-left">
    <img src="/assets/logo.png" class="logo">

    <div class="company-details">
      <strong><%= company.name %>,</strong><br>
      <%= company.address1 %><br>
      <%= company.address2 %><br>
      <%= company.city %><br>
      <%= company.phone %><br>
      <%= company.email %>
    </div>
  </div>

  <div class="company-right">
    <h1>Standard Invoice</h1>
  </div>
</div>

<hr class="divider">

<div class="invoice-meta">
  <div class="bill-to">
    <strong>Bill To</strong><br>
    <%= invoice.client %><br>
    <%= invoice.client_address %>
  </div>

  <div class="invoice-info">
    <div><span>Invoice Number</span> <b><%= invoice.invoice_number %></b></div>
    <div><span>Date</span> <%= invoice.invoice_date %></div>
    <div><span>Due Date</span> <%= invoice.due_date %></div>
    <div><span>Terms</span> End of Month</div>
  </div>
</div>

<table class="invoice-table">
  <thead>
    <tr>
      <th>Description</th>
      <th>Quantity</th>
      <th>Unit price</th>
      <th>Amount</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <%= invoice.description %><br>
        <small>(<%= invoice.reference %>)</small>
      </td>
      <td>1</td>
      <td>Rs. <%= invoice.total %></td>
      <td>Rs. <%= invoice.total %></td>
    </tr>
  </tbody>
</table>

<div class="totals">
  <div class="totals-row">
    <span>Total</span>
    <span>Rs. <%= invoice.total %></span>
  </div>
  <div class="totals-row">
    <span>Paid Amount</span>
    <span>Rs. <%= invoice.paid %></span>
  </div>
  <div class="totals-row balance">
    <span>Balance Due</span>
    <span>Rs. <%= invoice.balance %></span>
  </div>
</div>

<% -include('terms') %>

<div class="signature">
  <div class="sign-box">
    <strong>AUTHORIZED SIGNATORY</strong><br><br>
    <img src="/assets/signature.png" class="signature-img"><br>
    (<%= company.signatory %>)
  </div>
</div>

<% if (invoice.installment_mode !== 'NONE' && installments.length) { %>
  <div class="page-break">
    <h3>Installment Schedule</h3>
    <table>
      <tr>
        <th>S.No</th>
        <th>Amount</th>
        <th>Due On</th>
        <th>Paid On</th>
      </tr>
      <% installments.forEach((i, idx) => { %>
        <tr>
          <td><%= idx + 1 %></td>
          <td>Rs. <%= i.amount %></td>
          <td><%= i.due_on %></td>
          <td><%= i.paid_on || '-' %></td>
        </tr>
      <% }) %>
    </table>
  </div>
<% } %>
